(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{754:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return d}));var n=a(10),r=a.n(n),c=a(38),l=a(37);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e){return c.a.create(i({},e,{API:l.a.API+"/room/create"}))}function m(e){return c.a.getList(i({},e,{API:l.a.API+"/room/get-rooms"}))}function u(e){return c.a.del(i({},e,{API:l.a.API+"/room/delete"}))}function p(e){return c.a.create(i({},e,{API:l.a.API+"/room/delete-all"}))}function d(e){return c.a.update(i({},e,{API:l.a.API+"/room/update"}))}},779:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a.n(n),c=a(147),l=a.n(c),o=a(10),i=a.n(o),s=a(193),m=a.n(s),u=a(0),p=a.n(u),d=a(1),f=a.n(d),h=a(50),g=a(750),y=a(741),E=a(109),b=a(106),O=a(773),x=a(746),w=a(748),v=a(749),k=a(756),j=a(774),P=(a(60),a(755)),I=a.n(P),N=a(21),C=(a(250),a(754)),S=a(248),q=a.n(S),T=a(752),R=a(751),D=a(775),H=a(777),A=a(125),M=a.n(A);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=T.a.TextArea,z=function(e){var t=R.a.useForm(),a=m()(t,1)[0],n=e.isOpen,c=e.toggleModal,o=e.roomEdited,i=e.callback,s=e.type,d=e.title,f=e.block,h=Object(u.useState)(!1),g=m()(h,2),y=g[0],E=g[1];Object(u.useEffect)((function(){!0===n&&(M.a.isEmpty(o)?a.setFieldsValue({nameRoom:"",maxPeople:"",description:"",floor:"",square:"",price:""}):a.setFieldsValue({nameRoom:o.nameRoom,maxPeople:o.maxPeople,description:o.description,floor:o.floor,square:o.square,price:o.price}))}),[n,o]);var O=function(){var e=l()(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,C.e(_({},t,{id:o.key}));case 3:(a=e.sent)&&(a.data&&a.data.data?(x.a.success("Cập nhật phòng thành công"),c(),i()):x.a.error("Cập nhật phòng thất bại"),E(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=l()(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_({},t,{nameBlock:"",idBlock:f.id,status:0}),E(!0),e.next=4,C.a(_({},a));case 4:(n=e.sent)&&(n.data&&n.data.data?(x.a.success("Tạo phòng thành công"),c(),i()):x.a.error("Tạo phòng thất bại"),E(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.a.createElement(D.a,{width:1e3,title:p.a.createElement("div",{className:"flex-row",style:{fontSize:20,color:"#08979c"}},p.a.createElement("i",{className:"create"===s?"icon-add":"icon-createmode_editedit"}),"  ",p.a.createElement("strong",null,d)),forceRender:!0,destroyOnClose:!1,getContainer:!1,visible:n,onOk:function(){c()},onCancel:function(){c()},footer:null},p.a.createElement(R.a,q()({form:a},{labelCol:{xs:{span:24},md:{span:9}},wrapperCol:{xs:{span:24},md:{span:15}}},{name:"form-block",onFinish:function(e){M.a.isEmpty(o)?k(e):O(e)}}),p.a.createElement(w.a,null,p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Khu/Tòa nhà",name:"nameBlock"},p.a.createElement("strong",null,f?f.nameBlock:null))),p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Tên phòng",name:"nameRoom",rules:[{required:!0,message:"Hãy nhập tên phòng"}]},p.a.createElement(T.a,{style:{width:200},placeholder:"Nhập tên phòng"})))),p.a.createElement(w.a,null,p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Số người tối đa",name:"maxPeople",rules:[{required:!0,message:"Hãy nhập số người tối đa"}]},p.a.createElement(H.a,{style:{width:200},min:1,max:10,placeholder:"Nhập số người tối đa"}))),p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Tầng",name:"floor",rules:[{required:!0,message:"Hãy nhập tầng"}]},p.a.createElement(H.a,{style:{width:200},placeholder:"Nhập tầng"})))),p.a.createElement(w.a,null,p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Diện tích",name:"square",rules:[{required:!0,message:"Hãy nhập diện tích(m2)"}]},p.a.createElement(H.a,{style:{width:200},min:1,max:100,placeholder:"Nhập diện tích"}))),p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Đơn giá",name:"price",rules:[{required:!0,message:"Hãy nhập giá phòng"}]},p.a.createElement(H.a,{style:{width:200},formatter:function(e){return"₫ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")},placeholder:"Nhập số tiền"})))),p.a.createElement(w.a,null,p.a.createElement(v.a,{span:24},p.a.createElement(R.a.Item,{wrapperCol:{md:{span:20}},labelCol:{md:{span:4}},label:"Mô tả",name:"description"},p.a.createElement(X,{placeholder:"Hãy nhập mô tả"})))),p.a.createElement(R.a.Item,{wrapperCol:{md:{span:8,offset:16}}},p.a.createElement("div",{className:"flex-row",style:{justifyContent:"flex-end"}},p.a.createElement(b.a,{onClick:function(){c()}},"Hủy bỏ")," ",p.a.createElement(b.a,{htmlType:"submit",type:"primary",loading:y},"Lưu lại")))))};z.propTypes={isOpen:f.a.bool.isRequired,toggleModal:f.a.func.isRequired},z.defaultProps={title:"Thêm mới",type:"create",roomEdited:{}};var L=z,F={name:"plus",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]}},V=a(71),J=function(e,t){return p.a.createElement(V.a,Object.assign({},e,{ref:t,icon:F}))};J.displayName="PlusOutlined";var K=p.a.forwardRef(J),G=function(e){var t=e.isOpen,a=e.toggleModal,n=e.block,r=Object(u.useState)([{nameRoom:"",floor:"",square:"",price:"",description:"",idBlock:n?n.id:""}]),c=m()(r,2),l=c[0],o=(c[1],{labelCol:{xs:{span:24},md:{span:9}},wrapperCol:{xs:{span:24},md:{span:15}}});return p.a.createElement(D.a,{width:1e3,title:p.a.createElement("div",{className:"flex-row",style:{fontSize:20,color:"#08979c"}},p.a.createElement("i",{className:"icon-add"}),"  ",p.a.createElement("strong",null,"Thêm nhiều")),forceRender:!0,destroyOnClose:!1,getContainer:!1,visible:t,onOk:function(){a()},onCancel:function(){a()},footer:null},function(){if(l.length>0)return l.map((function(e,t){return p.a.createElement(R.a,q()({key:Math.random()},o),p.a.createElement(w.a,null,p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Tầng",name:"floor"},p.a.createElement(H.a,{style:{width:200},placeholder:"Nhập tầng ví dụ: 1, 2, 3"}))),p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Số phòng/tầng",name:"nameRoom",rules:[{required:!0,message:"Hãy nhập tên phòng"}]},p.a.createElement(T.a,{style:{width:200},placeholder:"Nhập tên phòng"})))),p.a.createElement(w.a,null,p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Số người tối đa/phòng",name:"maxPeople",rules:[{required:!0,message:"Hãy nhập số người tối đa"}]},p.a.createElement(H.a,{style:{width:200},placeholder:"Nhập số người tối đa"}))),p.a.createElement(v.a,{xs:{span:24},md:{span:12}},p.a.createElement(R.a.Item,{label:"Đơn giá",name:"price",rules:[{required:!0,message:"Hãy nhập đơn giá"}]},p.a.createElement(H.a,{style:{width:200},placeholder:"Nhập đơn giá phòng"})))),p.a.createElement(R.a.Item,{wrapperCol:{md:{span:24}}},p.a.createElement(b.a,{className:"btn-add-more",htmlType:"submit",type:"primary",shape:"circle",icon:p.a.createElement(K,null)})))}))}())};G.propType={isOpen:f.a.bool.isRequired,toggleModal:f.a.func.isRequired},G.defaultProps={isOpen:!1};var Q=G;function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=g.a.Title,Z=y.a.Option,$=function(e){var t=e.blocks,a=Object(u.useState)(!1),n=m()(a,2),c=n[0],o=n[1],i=Object(u.useState)(null),s=m()(i,2),d=s[0],f=s[1],h=Object(u.useState)([]),g=m()(h,2),P=g[0],N=g[1],S=Object(u.useState)({isOpen:!1,roomEdited:{}}),q=m()(S,2),T=q[0],R=q[1],D=Object(u.useState)([]),H=m()(D,2),A=H[0],M=H[1],B=Object(u.useState)(!1),_=m()(B,2),X=_[0],z=_[1],F={selectedRowKeys:A,onChange:function(e){M(e)}},V=[{title:"",dataIndex:"edit",key:"edit",width:100,render:function(e){return p.a.createElement("div",{className:"flex-row-center"},p.a.createElement(E.a,{title:"Sửa"},p.a.createElement(b.a,{onClick:function(){return J(e)},className:"flex-row-center",size:"small",shape:"circle"},p.a.createElement("i",{className:"icon-createmode_editedit"}))),"  ",p.a.createElement(E.a,{title:"Xóa"},p.a.createElement(O.a,{title:"Bạn muốn xóa khu trọ/căn hộ này?",onConfirm:function(){return K(e)},okText:"Xóa",cancelText:"Hủy"},p.a.createElement(b.a,{className:"flex-row-center",size:"small",type:"danger",shape:"circle"},p.a.createElement("i",{className:"icon-highlight_remove"})))))}},{title:"Tầng",dataIndex:"floor",key:"floor"},{title:"Tên phòng",dataIndex:"nameRoom",key:"nameRoom"},{title:"Số người tối đa",dataIndex:"maxPeople",key:"maxPeople"},{title:"Diện tích(m2)",dataIndex:"square",key:"square",sorter:function(e,t){return e.square-t.square},ellipsis:!0},{title:"Đơn giá",dataIndex:"price",key:"price",sorter:function(e,t){return e.price-t.price},render:function(e){return p.a.createElement("div",null,I()(e).format("0,0.00")," vnđ")}},{title:p.a.createElement("div",{style:{textAlign:"center"}},"Trạng thái"),dataIndex:"status",key:"status",filterMultiple:!1,filters:[{text:"Còn trống",value:0},{text:"Đã thuê",value:1}],onFilter:function(e,t){return e===t.status},render:function(e){switch(e){case 0:return p.a.createElement("div",{className:"flex-row-center",style:{color:"#f5222d"}},p.a.createElement("i",{className:"icon-error"}),"   Còn trống");case 1:return p.a.createElement("div",{className:"flex-row-center",style:{color:"#13c2c2"}},p.a.createElement("i",{className:"icon-check_circle"}),"   Đã thuê")}}},{title:"Mô tả",dataIndex:"description",key:"description",ellipsis:!0}];Object(u.useEffect)((function(){e.layout({type:"path",value:"rooms-motel"})}),[]),Object(u.useEffect)((function(){if(t.length>0){var e=t.some((function(e){return e.id===+localStorage.getItem("blockSelected")}));if(localStorage.getItem("blockSelected")&&e){var a=localStorage.getItem("blockSelected");f(+a)}else f(t[0].id)}}),[t]),Object(u.useEffect)((function(){d&&G()}),[d]);var J=function(e){var t=P.find((function(t){return t.key===e}));R(W({},T,{isOpen:!0,roomEdited:t}))},K=function(){var e=l()(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,C.b({id:t});case 3:(a=e.sent)&&(a.data&&a.data.data?(x.a.success("Xóa phòng thành công"),G()):x.a.error("Xóa phòng không thành công"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=l()(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,C.d({idBlock:d,id:1});case 3:(t=e.sent)&&(t.data&&t.data.data&&(a=t.data.data.rooms,n=a.map((function(e){return{key:e.id,nameRoom:e.nameRoom,edit:e.id,floor:e.floor,square:e.square,price:e.price,description:e.description,maxPeople:e.maxPeople,status:e.status}})),N(n)),o(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=l()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.c({roomsId:A});case 2:(t=e.sent)&&(t.data&&t.data.data?(x.a.success("Xóa thành công"),M([]),G()):x.a.error("Xóa thất bại"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p.a.createElement("div",{style:{padding:10}},p.a.createElement(w.a,null,p.a.createElement(v.a,{xs:{span:24,offset:0},md:{span:12,offset:0}},p.a.createElement(Y,{level:4},"QUẢN LÝ PHÒNG TRỌ")),p.a.createElement(v.a,{xs:{span:24,offset:0},md:{span:12,offset:0},className:"flex-row",style:{justifyContent:"flex-end"}},p.a.createElement(y.a,{showSearch:!0,value:d,style:{width:200},placeholder:"Chọn khu trọ",onChange:function(e){localStorage.setItem("blockSelected",e),f(e)},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},t.map((function(e){return p.a.createElement(Z,{key:e.id,value:e.id},e.nameBlock)}))))),p.a.createElement(w.a,{style:{marginTop:20}},p.a.createElement(v.a,{xs:{span:24},md:{span:24},className:"flex-row",style:{justifyContent:"flex-end"}},p.a.createElement(b.a,{disabled:!(t.length>0),type:"primary",className:"flex-row",onClick:function(){R(W({},T,{isOpen:!0,roomEdited:{}}))}},p.a.createElement("i",{className:"icon-add_circle_outlinecontrol_point"}),"   Thêm mới"),"  ",p.a.createElement(b.a,{onClick:function(){z(!0)},disabled:!(t.length>0),type:"primary",className:"flex-row"},p.a.createElement("i",{className:"icon-add_circle_outlinecontrol_point"}),"   Thêm nhiều"),"  ",p.a.createElement(O.a,{disabled:!(A.length>0),placement:"bottom",title:"Bạn có muốn xóa ".concat(A.length," phòng này?"),okText:"Xóa",onConfirm:U,cancelText:"Hủy"},p.a.createElement(b.a,{disabled:!(A.length>0),type:"danger"},p.a.createElement("i",{className:"icon-delete"}),"   Xóa nhiều")))),p.a.createElement(k.a,{spinning:c,tip:"Loading..."},p.a.createElement(w.a,{style:{paddingTop:"10px"}},p.a.createElement(j.a,{size:"small",rowSelection:F,style:{width:"100%"},columns:V,dataSource:P}))),p.a.createElement(L,{roomEdited:T.roomEdited,block:t.find((function(e){return e.id===d})),isOpen:T.isOpen,toggleModal:function(){R(W({},T,{isOpen:!T.isOpen}))},callback:function(){G()}}),p.a.createElement(Q,{isOpen:X,toggleModal:function(){z(!X)},block:t.find((function(e){return e.id===d}))}))},ee={layout:N.c};$.propTypes={};t.default=Object(h.b)((function(e){return{blocks:e.Layouts.layoutReducer.blocks}}),ee)($)}}]);
//# sourceMappingURL=3.js.map