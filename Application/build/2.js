(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{772:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a.n(n),c=a(230),o=a.n(c),l=a(0),i=a.n(l),s=a(67),d=a(748),u=a(109),p=a(106),m=a(768),f=a(744),b=a(746),h=a(747),y=a(752),O=a(769),k=a(297),g=a.n(k),E=a(750),j=a(749),w=a(770),v=a(1),P=a.n(v),x=a(125),T=a.n(x),I=a(77),C=a(76);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={isOpen:P.a.bool.isRequired,toggleModal:P.a.func.isRequired,blockEdited:P.a.object},H=(d.a.Text,d.a.Title,E.a.TextArea),X=function(e){var t=j.a.useForm(),a=o()(t,1)[0],n=e.isOpen,r=e.toggleModal,c=e.title,s=e.type,d=e.userLogin,u=e.blockEdited,m=Object(l.useState)(!1),b=o()(m,2),h=b[0],y=b[1];Object(l.useEffect)((function(){T.a.isEmpty(u)?a.setFieldsValue({nameBlock:"",address:"",descreption:""}):a.setFieldsValue({nameBlock:u.nameBlock,address:u.address,descreption:u.desc})}),[n,u]);var O=function(t){y(!0);var a,n=(a=A({id:u.key},t),I.a.update(N({},a,{API:C.a.API+"/block/update"})));n&&n.then((function(t){t.data&&t.data.data?(f.a.success("Cập nhật thành công!"),r(),e.callback()):f.a.error("Cập nhật thất bại!"),y(!1)}))},k=function(t){if(d.id){y(!0);var a=(n=A({},t,{idOwner:d.id}),I.a.create(N({},n,{API:C.a.API+"/block/create"})));a&&a.then((function(t){t.data&&t.data.data?(f.a.success("Tạo khu trọ thành công!"),r(),e.callback()):f.a.error("Tạo khu trọ thất bại! Xin vui lòng thử lại"),y(!1)}))}var n};return i.a.createElement(w.a,{width:700,title:i.a.createElement("div",{className:"flex-row",style:{fontSize:20,color:"#08979c"}},i.a.createElement("i",{className:"create"===s?"icon-add":"icon-createmode_editedit"}),"  ",i.a.createElement("strong",null,c)),forceRender:!0,destroyOnClose:!1,getContainer:!1,visible:n,onOk:function(){r()},onCancel:function(){r()},footer:null},i.a.createElement(j.a,g()({},{labelCol:{xs:{span:24},md:{span:4}},wrapperCol:{xs:{span:24},md:{span:20}}},{form:a,name:"form-block",onFinish:function(e){T.a.isEmpty(u)?k(e):O(e)}}),i.a.createElement(j.a.Item,{label:"Tên khu/Tòa nhà",name:"nameBlock",rules:[{required:!0,message:"Hãy nhập tên khu trọ/căn hộ"}]},i.a.createElement(E.a,{placeholder:"Nhập tên khu trọ/căn hộ"})),i.a.createElement(j.a.Item,{label:"Địa chỉ",name:"address",rules:[{required:!0,message:"Hãy nhập Địa chỉ khu trọ/căn hộ"}]},i.a.createElement(H,{placeholder:"Hãy nhập Địa chỉ khu trọ/căn hộ"})),i.a.createElement(j.a.Item,{label:"Mô tả",name:"descreption"},i.a.createElement(H,{placeholder:"Hãy nhập mô tả"})),i.a.createElement(j.a.Item,{wrapperCol:{md:{span:8,offset:16}}},i.a.createElement("div",{className:"flex-row",style:{justifyContent:"flex-end"}},i.a.createElement(p.a,{onClick:function(){r()}},"Hủy bỏ")," ",i.a.createElement(p.a,{htmlType:"submit",type:"primary",loading:h},"Lưu lại")))))};X.propTypes=B,X.defaultProps={title:"Thêm mới",type:"create",blockEdited:{}};var L=Object(s.b)((function(e){return{userLogin:e.Layouts.layoutReducer.userLogin}}))(X),R=a(25);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=d.a.Title,q=(d.a.Text,{layout:R.b});t.default=Object(s.b)(null,q)((function(e){var t=Object(l.useState)([]),a=o()(t,2),n=a[0],r=a[1],c=Object(l.useState)({isOpen:!1,blockEdited:{}}),s=o()(c,2),d=s[0],k=s[1],g=Object(l.useState)(!1),E=o()(g,2),j=E[0],w=E[1],v=Object(l.useState)([]),P=o()(v,2),x=P[0],T=P[1],S={selectedRowKeys:x,onChange:function(e){console.log(e),T(e)}},D=[{title:"",dataIndex:"edit",key:"edit",width:100,render:function(e){return i.a.createElement("div",{className:"flex-row-center"},i.a.createElement(u.a,{title:"Sửa"},i.a.createElement(p.a,{onClick:function(){return H(e)},className:"flex-row-center",size:"small",shape:"circle"},i.a.createElement("i",{className:"icon-createmode_editedit"}))),"  ",i.a.createElement(u.a,{title:"Xóa"},i.a.createElement(m.a,{title:"Bạn muốn xóa khu trọ/căn hộ này?",onConfirm:function(){return A(e)},okText:"Xóa",cancelText:"Hủy"},i.a.createElement(p.a,{className:"flex-row-center",size:"small",type:"danger",shape:"circle"},i.a.createElement("i",{className:"icon-highlight_remove"})))))}},{title:"Tên khu/Tòa nhà",dataIndex:"nameBlock",key:"nameBlock"},{title:"Địa chỉ",dataIndex:"address",key:"address"},{title:"Mô tả",dataIndex:"desc",key:"desc"}];Object(l.useEffect)((function(){e.layout({type:"path",value:"blocks"}),B()}),[]);var A=function(e){var t,a=(t={id:e},I.a.del(N({},t,{API:C.a.API+"/block/delete"})));a&&a.then((function(e){e.data&&e.data.data?(f.a.success("Xóa khu trọ/căn hộ thành công"),B()):f.a.error("Xóa khu trọ/căn hộ thất bại!")}))},B=function(){var e,t=I.a.getList(N({},e,{API:C.a.API+"/block/get-block"}));w(!0),t&&t.then((function(e){if(e.data&&e.data.data){var t=e.data.data.blocks.map((function(e){return{key:e.id,edit:e.id,nameBlock:e.nameBlock,address:e.address,desc:e.descreption}}));r(t)}w(!1)}))},H=function(e){var t=n.find((function(t){return t.key===e}));k(F({},d,{isOpen:!0,blockEdited:t}))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{style:{padding:10}},i.a.createElement(h.a,{xs:{span:24,offset:0},md:{span:12,offset:0}},i.a.createElement(M,{level:4},"QUẢN LÝ DANH SÁCH NHÀ TRỌ")),i.a.createElement(h.a,{xs:{span:24,offset:0},md:{span:12,offset:0},style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(p.a,{type:"primary",className:"flex-row",onClick:function(){k(F({},d,{blockEdited:{},isOpen:!0}))}},i.a.createElement("i",{className:"icon-add_circle_outlinecontrol_point"}),"   Thêm mới"),"  ",i.a.createElement(m.a,{placement:"bottom",title:"Bạn có muốn xóa ".concat(x.length," khu trọ/căn hộ này?"),onConfirm:function(){var e,t=(e={blocksId:x},I.a.create(N({},e,{API:C.a.API+"/block/delete-all"})));t&&t.then((function(e){e.data&&e.data.data?(f.a.success("Xóa thành công!"),T([]),B()):f.a.error("Xóa không thành công!")}))},okText:"Xóa",cancelText:"Hủy"},i.a.createElement(p.a,{type:"danger",disabled:!(x.length>0)},i.a.createElement("i",{className:"icon-delete"}),"   Xóa nhiều")))),i.a.createElement(y.a,{spinning:j,tip:"Loading..."},i.a.createElement(b.a,{style:{padding:10}},i.a.createElement(O.a,{size:"small",rowSelection:S,style:{width:"100%"},columns:D,dataSource:n}))),i.a.createElement(L,{blockEdited:d.blockEdited,isOpen:d.isOpen,toggleModal:function(){k(F({},d,{isOpen:!d.isOpen}))},callback:function(){B()}}))}))}}]);
//# sourceMappingURL=2.js.map