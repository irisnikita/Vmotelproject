(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{752:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return d}));var a=n(19),r=n.n(a),c=n(77),o=n(76);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return c.a.create(i({},e,{API:o.a.API+"/room/create"}))}function u(e){return c.a.getList(i({},e,{API:o.a.API+"/room/get-rooms"}))}function p(e){return c.a.del(i({},e,{API:o.a.API+"/room/delete"}))}function m(e){return c.a.create(i({},e,{API:o.a.API+"/room/delete-all"}))}function d(e){return c.a.update(i({},e,{API:o.a.API+"/room/update"}))}},753:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return d}));var a=n(19),r=n.n(a),c=n(77),o=n(76);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return c.a.create(i({},e,{API:o.a.API+"/block/create"}))}function u(e){return c.a.getList(i({},e,{API:o.a.API+"/block/get-block"}))}function p(e){return c.a.del(i({},e,{API:o.a.API+"/block/delete"}))}function m(e){return c.a.create(i({},e,{API:o.a.API+"/block/delete-all"}))}function d(e){return c.a.update(i({},e,{API:o.a.API+"/block/update"}))}},778:function(e,t,n){"use strict";n.r(t);var a=n(26),r=n.n(a),c=n(159),o=n.n(c),l=n(19),i=n.n(l),s=n(192),u=n.n(s),p=n(0),m=n.n(p),d=n(1),f=n.n(d),h=n(61),b=n(748),y=n(739),g=n(109),O=n(106),E=n(772),w=n(744),P=n(746),x=n(747),v=n(750),j=n(754),k=n(773),I=(n(59),n(770)),S=n.n(I),C=n(25),T=n(753),N=n(752),A=n(248),D=n.n(A),q=n(749),R=n(774),H=n(775),B=n(124),_=n.n(B);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=v.a.TextArea,M=function(e){var t=q.a.useForm(),n=u()(t,1)[0],a=e.isOpen,c=e.toggleModal,l=e.roomEdited,i=e.callback,s=e.type,d=e.title,f=e.block,h=Object(p.useState)(!1),b=u()(h,2),y=b[0],g=b[1];Object(p.useEffect)((function(){!0===a&&(_.a.isEmpty(l)?n.setFieldsValue({nameRoom:"",maxPeople:"",description:"",floor:"",square:"",price:""}):n.setFieldsValue({nameRoom:l.nameRoom,maxPeople:l.maxPeople,description:l.description,floor:l.floor,square:l.square,price:l.price}))}),[a,l]);var E=function(){var e=o()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,N.e(L({},t,{id:l.key}));case 3:(n=e.sent)&&(n.data&&n.data.data?(w.a.success("Cập nhật phòng thành công"),c(),i()):w.a.error("Cập nhật phòng thất bại"),g(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=o()(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L({},t,{nameBlock:"",idBlock:f.id,status:0}),g(!0),e.next=4,N.a(L({},n));case 4:(a=e.sent)&&(a.data&&a.data.data?(w.a.success("Tạo phòng thành công"),c(),i()):w.a.error("Tạo phòng thất bại"),g(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement(R.a,{width:800,title:m.a.createElement("div",{className:"flex-row",style:{fontSize:20,color:"#08979c"}},m.a.createElement("i",{className:"create"===s?"icon-add":"icon-createmode_editedit"}),"  ",m.a.createElement("strong",null,d)),forceRender:!0,destroyOnClose:!1,getContainer:!1,visible:a,onOk:function(){c()},onCancel:function(){c()},footer:null},m.a.createElement(q.a,D()({form:n},{labelCol:{xs:{span:24},md:{span:9}},wrapperCol:{xs:{span:24},md:{span:15}}},{name:"form-block",onFinish:function(e){_.a.isEmpty(l)?j(e):E(e)}}),m.a.createElement(P.a,null,m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(q.a.Item,{label:"Khu/Tòa nhà",name:"nameBlock"},m.a.createElement("strong",null,f?f.nameBlock:null))),m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(q.a.Item,{label:"Tên phòng",name:"nameRoom",rules:[{required:!0,message:"Hãy nhập tên phòng"}]},m.a.createElement(v.a,{style:{width:200},placeholder:"Nhập tên phòng"})))),m.a.createElement(P.a,null,m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(q.a.Item,{label:"Số người tối đa",name:"maxPeople",rules:[{required:!0,message:"Hãy nhập số người tối đa"}]},m.a.createElement(H.a,{style:{width:200},min:1,max:10,placeholder:"Nhập số người tối đa"}))),m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(q.a.Item,{label:"Tầng",name:"floor",rules:[{required:!0,message:"Hãy nhập tầng"}]},m.a.createElement(H.a,{style:{width:200},placeholder:"Nhập tầng"})))),m.a.createElement(P.a,null,m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(q.a.Item,{label:"Diện tích",name:"square",rules:[{required:!0,message:"Hãy nhập diện tích(m2)"}]},m.a.createElement(H.a,{style:{width:200},min:1,max:100,placeholder:"Nhập diện tích"}))),m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(q.a.Item,{label:"Đơn giá",name:"price",rules:[{required:!0,message:"Hãy nhập giá phòng"}]},m.a.createElement(H.a,{style:{width:200},formatter:function(e){return"₫ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")},placeholder:"Nhập số tiền"})))),m.a.createElement(P.a,null,m.a.createElement(x.a,{span:24},m.a.createElement(q.a.Item,{wrapperCol:{md:{span:20}},labelCol:{md:{span:4}},label:"Mô tả",name:"description"},m.a.createElement(F,{placeholder:"Hãy nhập mô tả"})))),m.a.createElement(q.a.Item,{wrapperCol:{md:{span:8,offset:16}}},m.a.createElement("div",{className:"flex-row",style:{justifyContent:"flex-end"}},m.a.createElement(O.a,{onClick:function(){c()}},"Hủy bỏ")," ",m.a.createElement(O.a,{htmlType:"submit",type:"primary",loading:y},"Lưu lại")))))};M.propTypes={isOpen:f.a.bool.isRequired,toggleModal:f.a.func.isRequired},M.defaultProps={title:"Thêm mới",type:"create",roomEdited:{}};var z=M;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=b.a.Title,K=y.a.Option,Q=function(e){var t=Object(p.useState)(!1),n=u()(t,2),a=n[0],c=n[1],l=Object(p.useState)([]),i=u()(l,2),s=i[0],d=i[1],f=Object(p.useState)(null),h=u()(f,2),b=h[0],I=h[1],C=Object(p.useState)([]),A=u()(C,2),D=A[0],q=A[1],R=Object(p.useState)({isOpen:!1,roomEdited:{}}),H=u()(R,2),B=H[0],_=H[1],X=Object(p.useState)([]),L=u()(X,2),F=L[0],M=L[1],V={selectedRowKeys:F,onChange:function(e){M(e)}},Q=[{title:"",dataIndex:"edit",key:"edit",width:100,render:function(e){return m.a.createElement("div",{className:"flex-row-center"},m.a.createElement(g.a,{title:"Sửa"},m.a.createElement(O.a,{onClick:function(){return U(e)},className:"flex-row-center",size:"small",shape:"circle"},m.a.createElement("i",{className:"icon-createmode_editedit"}))),"  ",m.a.createElement(g.a,{title:"Xóa"},m.a.createElement(E.a,{title:"Bạn muốn xóa khu trọ/căn hộ này?",onConfirm:function(){return W(e)},okText:"Xóa",cancelText:"Hủy"},m.a.createElement(O.a,{className:"flex-row-center",size:"small",type:"danger",shape:"circle"},m.a.createElement("i",{className:"icon-highlight_remove"})))))}},{title:"Tầng",dataIndex:"floor",key:"floor"},{title:"Tên phòng",dataIndex:"nameRoom",key:"nameRoom"},{title:"Số người tối đa",dataIndex:"maxPeople",key:"maxPeople"},{title:"Diện tích(m2)",dataIndex:"square",key:"square"},{title:"Đơn giá",dataIndex:"price",key:"price",render:function(e){return m.a.createElement("div",null,S()(e).format("0,0.00")," vnđ")}},{title:"Trạng thái",dataIndex:"status",key:"status",render:function(e){switch(e){case 0:return m.a.createElement("div",null,"Còn trống");case 1:return m.a.createElement("div",null,"Đã thuê")}}},{title:"Mô tả",dataIndex:"description",key:"description"}];Object(p.useEffect)((function(){e.layout({type:"path",value:"rooms-motel"}),Z()}),[]),Object(p.useEffect)((function(){if(s.length>0){var e=s.some((function(e){return e.id===+localStorage.getItem("blockSelected")}));if(localStorage.getItem("blockSelected")&&e){var t=localStorage.getItem("blockSelected");I(+t)}else I(s[0].id)}}),[s]),Object(p.useEffect)((function(){b&&Y()}),[b]);var U=function(e){var t=D.find((function(t){return t.key===e}));_(G({},B,{isOpen:!0,roomEdited:t}))},W=function(){var e=o()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,N.b({id:t});case 3:(n=e.sent)&&(n.data&&n.data.data?(w.a.success("Xóa phòng thành công"),Y()):w.a.error("Xóa phòng không thành công"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=o()(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,N.d({idBlock:b,id:1});case 3:(t=e.sent)&&(t.data&&t.data.data&&(n=t.data.data.rooms,a=n.map((function(e){return{key:e.id,nameRoom:e.nameRoom,edit:e.id,floor:e.floor,square:e.square,price:e.price,description:e.description,maxPeople:e.maxPeople,status:e.status}})),q(a)),c(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=T.d();c(!0),e&&e.then((function(e){if(e.data&&e.data.data){var t=e.data.data.blocks;d(t)}c(!1)}))},$=function(){var e=o()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.c({roomsId:F});case 2:(t=e.sent)&&(t.data&&t.data.data?(w.a.success("Xóa thành công"),Y()):w.a.error("Xóa thất bại"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.a.createElement("div",{style:{padding:10}},m.a.createElement(P.a,null,m.a.createElement(x.a,{xs:{span:24,offset:0},md:{span:12,offset:0}},m.a.createElement(J,{level:4},"QUẢN LÝ PHÒNG TRỌ")),m.a.createElement(x.a,{xs:{span:24,offset:0},md:{span:12,offset:0},className:"flex-row",style:{justifyContent:"flex-end"}},m.a.createElement(y.a,{showSearch:!0,value:b,style:{width:200},placeholder:"Chọn khu trọ",onChange:function(e){localStorage.setItem("blockSelected",e),I(e),Y()},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},s.map((function(e){return m.a.createElement(K,{key:e.id,value:e.id},e.nameBlock)}))))),m.a.createElement(P.a,{style:{marginTop:20}},m.a.createElement(x.a,{xs:{span:24},md:{span:12}},m.a.createElement(v.a.Group,{compact:!0},m.a.createElement(y.a,{defaultValue:"hello"},m.a.createElement(K,{value:"hello"},"Hello")),m.a.createElement(v.a,{style:{width:200},defaultValue:"26888888"}))),m.a.createElement(x.a,{xs:{span:24},md:{span:12},className:"flex-row",style:{justifyContent:"flex-end"}},m.a.createElement(O.a,{disabled:!(s.length>0),type:"primary",className:"flex-row",onClick:function(){_(G({},B,{isOpen:!0,roomEdited:{}}))}},m.a.createElement("i",{className:"icon-add_circle_outlinecontrol_point"}),"   Thêm mới"),"  ",m.a.createElement(O.a,{disabled:!(s.length>0),type:"primary",className:"flex-row"},m.a.createElement("i",{className:"icon-add_circle_outlinecontrol_point"}),"   Thêm nhiều"),"  ",m.a.createElement(E.a,{disabled:!(F.length>0),placement:"bottom",title:"Bạn có muốn xóa ".concat(F.length," phòng này?"),okText:"Xóa",onConfirm:$,cancelText:"Hủy"},m.a.createElement(O.a,{disabled:!(F.length>0),type:"danger"},m.a.createElement("i",{className:"icon-delete"}),"   Xóa nhiều")))),m.a.createElement(j.a,{spinning:a,tip:"Loading..."},m.a.createElement(P.a,{style:{paddingTop:"10px"}},m.a.createElement(k.a,{size:"small",rowSelection:V,style:{width:"100%"},columns:Q,dataSource:D}))),m.a.createElement(z,{roomEdited:B.roomEdited,block:s.find((function(e){return e.id===b})),isOpen:B.isOpen,toggleModal:function(){_(G({},B,{isOpen:!B.isOpen}))},callback:function(){Y()}}))},U={layout:C.b};Q.propTypes={};t.default=Object(h.b)(null,U)(Q)}}]);
//# sourceMappingURL=2.js.map